{"ast":null,"code":"import { FAV_ADD, FAV_REMOVE, FETCH_SUCCESS, FETCH_LOADING, FETCH_ERROR, GET_FAVS_FROM_LS, RESET_LOCAL } from \"./actions\";\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nconst initial = {\n  favs: [],\n  current: null,\n  error: null,\n  loading: true\n};\nfunction writeFavsToLocalStorage(state) {\n  localStorage.setItem(\"s10g4\", JSON.stringify(state.favs));\n}\nfunction readFavsFromLocalStorage() {\n  return JSON.parse(localStorage.getItem(\"s10g4\"));\n}\nexport function myReducer() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initial;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case FAV_ADD:\n      if (!state.favs.includes(action.payload)) {\n        const newFavs = [...state.favs, action.payload];\n        writeFavsToLocalStorage({\n          ...state,\n          favs: newFavs\n        });\n        toast.success(\"favorilere eklendi\");\n        return {\n          ...state,\n          favs: newFavs\n        };\n      } else {\n        return state;\n      }\n    case FAV_REMOVE:\n      const updatedFavs = state.favs.filter(fav => fav.key !== action.payload);\n      writeFavsToLocalStorage({\n        ...state,\n        favs: updatedFavs\n      });\n      toast.success(\"favorilerden çıkarıldı\");\n      return {\n        ...state,\n        favs: updatedFavs\n      };\n    case FETCH_SUCCESS:\n      return {\n        ...state,\n        loading: false,\n        current: action.payload\n      };\n    case FETCH_LOADING:\n      return {\n        ...state,\n        loading: true,\n        error: ''\n      };\n    case FETCH_ERROR:\n      toast.error(action.payload);\n      return {\n        ...state,\n        loading: false,\n        error: action.payload\n      };\n    case GET_FAVS_FROM_LS:\n      return {\n        ...state,\n        favs: readFavsFromLocalStorage() || []\n      };\n    case RESET_LOCAL:\n      writeFavsToLocalStorage({\n        ...state,\n        favs: []\n      });\n      return {\n        ...state,\n        favs: []\n      };\n    default:\n      return state;\n  }\n}","map":{"version":3,"names":["FAV_ADD","FAV_REMOVE","FETCH_SUCCESS","FETCH_LOADING","FETCH_ERROR","GET_FAVS_FROM_LS","RESET_LOCAL","toast","initial","favs","current","error","loading","writeFavsToLocalStorage","state","localStorage","setItem","JSON","stringify","readFavsFromLocalStorage","parse","getItem","myReducer","arguments","length","undefined","action","type","includes","payload","newFavs","success","updatedFavs","filter","fav","key"],"sources":["/Users/derya/Desktop/Workintech-Repos/S10/fsweb-s10g4-thunk-and-apis/src/reducers.js"],"sourcesContent":["import {\n  FAV_ADD,\n  FAV_REMOVE,\n  FETCH_SUCCESS,\n  FETCH_LOADING,\n  FETCH_ERROR,\n  GET_FAVS_FROM_LS,\n  RESET_LOCAL\n} from \"./actions\";\n\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nconst initial = {\n  favs: [],\n  current: null,\n  error: null,\n  loading: true,\n};\n\nfunction writeFavsToLocalStorage(state) {\n  localStorage.setItem(\"s10g4\", JSON.stringify(state.favs));\n}\n\nfunction readFavsFromLocalStorage() {\n  return JSON.parse(localStorage.getItem(\"s10g4\"));\n}\n\nexport function myReducer(state = initial, action) {\n  switch (action.type) {\n    case FAV_ADD:\n      if(!state.favs.includes(action.payload)){\n      const newFavs = [...state.favs, action.payload];\n      writeFavsToLocalStorage({ ...state, favs: newFavs });\n      toast.success(\"favorilere eklendi\")\n      return { ...state, favs: newFavs };\n      }else{\n        return state\n      } \n    case FAV_REMOVE:\n      const updatedFavs = state.favs.filter((fav) => fav.key !== action.payload);\n      writeFavsToLocalStorage({ ...state, favs: updatedFavs });\n      toast.success(\"favorilerden çıkarıldı\")\n      return { ...state, favs: updatedFavs };\n\n    case FETCH_SUCCESS:\n      return {...state, loading: false, current: action.payload};\n\n    case FETCH_LOADING:\n      return {...state, loading: true, error: '' };\n\n    case FETCH_ERROR:\n      toast.error(action.payload)\n      return {...state, loading: false, error: action.payload};\n\n    case GET_FAVS_FROM_LS:\n      return {...state, favs: readFavsFromLocalStorage() || []};\n\n      case RESET_LOCAL:\n        writeFavsToLocalStorage({ ...state, favs:[] });\n        return {...state, favs:[]};\n\n    default:\n      return state;\n  }\n}\n"],"mappings":"AAAA,SACEA,OAAO,EACPC,UAAU,EACVC,aAAa,EACbC,aAAa,EACbC,WAAW,EACXC,gBAAgB,EAChBC,WAAW,QACN,WAAW;AAElB,SAASC,KAAK,QAAQ,gBAAgB;AACtC,OAAO,uCAAuC;AAE9C,MAAMC,OAAO,GAAG;EACdC,IAAI,EAAE,EAAE;EACRC,OAAO,EAAE,IAAI;EACbC,KAAK,EAAE,IAAI;EACXC,OAAO,EAAE;AACX,CAAC;AAED,SAASC,uBAAuBA,CAACC,KAAK,EAAE;EACtCC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEC,IAAI,CAACC,SAAS,CAACJ,KAAK,CAACL,IAAI,CAAC,CAAC;AAC3D;AAEA,SAASU,wBAAwBA,CAAA,EAAG;EAClC,OAAOF,IAAI,CAACG,KAAK,CAACL,YAAY,CAACM,OAAO,CAAC,OAAO,CAAC,CAAC;AAClD;AAEA,OAAO,SAASC,SAASA,CAAA,EAA0B;EAAA,IAAzBR,KAAK,GAAAS,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAGf,OAAO;EAAA,IAAEkB,MAAM,GAAAH,SAAA,CAAAC,MAAA,OAAAD,SAAA,MAAAE,SAAA;EAC/C,QAAQC,MAAM,CAACC,IAAI;IACjB,KAAK3B,OAAO;MACV,IAAG,CAACc,KAAK,CAACL,IAAI,CAACmB,QAAQ,CAACF,MAAM,CAACG,OAAO,CAAC,EAAC;QACxC,MAAMC,OAAO,GAAG,CAAC,GAAGhB,KAAK,CAACL,IAAI,EAAEiB,MAAM,CAACG,OAAO,CAAC;QAC/ChB,uBAAuB,CAAC;UAAE,GAAGC,KAAK;UAAEL,IAAI,EAAEqB;QAAQ,CAAC,CAAC;QACpDvB,KAAK,CAACwB,OAAO,CAAC,oBAAoB,CAAC;QACnC,OAAO;UAAE,GAAGjB,KAAK;UAAEL,IAAI,EAAEqB;QAAQ,CAAC;MAClC,CAAC,MAAI;QACH,OAAOhB,KAAK;MACd;IACF,KAAKb,UAAU;MACb,MAAM+B,WAAW,GAAGlB,KAAK,CAACL,IAAI,CAACwB,MAAM,CAAEC,GAAG,IAAKA,GAAG,CAACC,GAAG,KAAKT,MAAM,CAACG,OAAO,CAAC;MAC1EhB,uBAAuB,CAAC;QAAE,GAAGC,KAAK;QAAEL,IAAI,EAAEuB;MAAY,CAAC,CAAC;MACxDzB,KAAK,CAACwB,OAAO,CAAC,wBAAwB,CAAC;MACvC,OAAO;QAAE,GAAGjB,KAAK;QAAEL,IAAI,EAAEuB;MAAY,CAAC;IAExC,KAAK9B,aAAa;MAChB,OAAO;QAAC,GAAGY,KAAK;QAAEF,OAAO,EAAE,KAAK;QAAEF,OAAO,EAAEgB,MAAM,CAACG;MAAO,CAAC;IAE5D,KAAK1B,aAAa;MAChB,OAAO;QAAC,GAAGW,KAAK;QAAEF,OAAO,EAAE,IAAI;QAAED,KAAK,EAAE;MAAG,CAAC;IAE9C,KAAKP,WAAW;MACdG,KAAK,CAACI,KAAK,CAACe,MAAM,CAACG,OAAO,CAAC;MAC3B,OAAO;QAAC,GAAGf,KAAK;QAAEF,OAAO,EAAE,KAAK;QAAED,KAAK,EAAEe,MAAM,CAACG;MAAO,CAAC;IAE1D,KAAKxB,gBAAgB;MACnB,OAAO;QAAC,GAAGS,KAAK;QAAEL,IAAI,EAAEU,wBAAwB,CAAC,CAAC,IAAI;MAAE,CAAC;IAEzD,KAAKb,WAAW;MACdO,uBAAuB,CAAC;QAAE,GAAGC,KAAK;QAAEL,IAAI,EAAC;MAAG,CAAC,CAAC;MAC9C,OAAO;QAAC,GAAGK,KAAK;QAAEL,IAAI,EAAC;MAAE,CAAC;IAE9B;MACE,OAAOK,KAAK;EAChB;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}